{"version":3,"sources":["services/restMethods.js","components/PersonForm.js","components/Filter.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPerson","post","id","put","delete","PersonForm","props","persons","setPersons","newName","setNewName","newNumber","setNewNumber","handleNameChange","handleNumberChange","setEventMessage","setIsError","updatePerson","name","oldPerson","find","p","changedPerson","number","console","log","restService","returnedPerson","map","setTimeout","catch","error","JSON","stringify","addPerson","person","createdPerson","concat","onSubmit","e","preventDefault","filter","length","window","confirm","value","onChange","className","type","Filter","newSearch","handleSearchChange","Persons","personsToShow","deletePerson","onClick","Notification","message","isError","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","setNewSearch","eventMessage","useEffect","initialPersons","toLocaleLowerCase","includes","target","deletedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f054266b.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const req = axios.get(baseUrl)\r\n    return req.then(response => response.data)\r\n}\r\n\r\nconst create = newPerson => {\r\n    const req = axios.post(baseUrl, newPerson)\r\n    return req.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n    const req = axios.put(`${baseUrl}/${id}`, newPerson)\r\n    return req.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n    const req = axios.delete(`${baseUrl}/${id}`)\r\n    return req\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React from 'react'\r\nimport restService from '../services/restMethods'\r\n\r\nconst PersonForm = (props) => {\r\n\r\nconst { persons, setPersons, \r\n    newName, setNewName, \r\n    newNumber, setNewNumber,\r\n    handleNameChange, handleNumberChange,\r\n    setEventMessage, setIsError } = props\r\n\r\nconst handleAdding = (e) => {\r\n  e.preventDefault()\r\n  // check doubles\r\n  if(persons.filter(person => person.name === newName).length > 0){\r\n    const warning = window.confirm(`${newName} already exists in phonebook, replace old number with a new one?`)\r\n    if(warning) {\r\n      updatePerson(newName)\r\n    } \r\n  } else {\r\n    addPerson()\r\n  }\r\n}\r\n\r\nconst updatePerson = (name) => {\r\n  const oldPerson = persons.find(p => p.name === name)\r\n  const changedPerson = { ...oldPerson, number: newNumber}\r\n  console.log('update started')\r\n\r\n  restService\r\n    .update(changedPerson.id, changedPerson)\r\n    .then(returnedPerson => {\r\n      setPersons(persons.map(p => p.id !== oldPerson.id ? p : returnedPerson))\r\n      console.log('number update succesfull', oldPerson.name);\r\n      setIsError(false)\r\n      setEventMessage(`Updated ${changedPerson.name}`)\r\n      setTimeout(() => {\r\n        setEventMessage(null)\r\n        setIsError()\r\n      }, 3000)\r\n      setNewName('')\r\n      setNewNumber('')\r\n     })\r\n     .catch(error => {\r\n      console.log(error.response.data);\r\n      setEventMessage(JSON.stringify(error.response.data))\r\n      setIsError(true)\r\n      setTimeout(() => {\r\n        setEventMessage(null)\r\n        setIsError()\r\n      }, 5000)\r\n     })\r\n}\r\n\r\nconst addPerson = () => {\r\n    const person = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    console.log('adding new started')\r\n\r\n        restService\r\n          .create(person)\r\n          .then(createdPerson => {\r\n            setPersons(persons.concat(createdPerson))\r\n            console.log('added', person.name);\r\n            setIsError(false)\r\n            setEventMessage(`${person.name} added`)\r\n            setTimeout(() => {\r\n              setEventMessage(null)\r\n              setIsError()\r\n            }, 3000)\r\n            setNewName('')\r\n            setNewNumber('')\r\n          })\r\n          .catch(error => {\r\n            console.log(error.response.data);\r\n            setEventMessage(JSON.stringify(error.response.data))\r\n            setIsError(true)\r\n            setTimeout(() => {\r\n              setEventMessage(null)\r\n              setIsError()\r\n            }, 5000)\r\n          })\r\n}\r\n\r\n\r\n    return(\r\n    <form onSubmit={handleAdding}>\r\n        <div>\r\n          name: \r\n          <input \r\n            value={newName} \r\n            onChange={handleNameChange}/>\r\n        </div>\r\n        <br />\r\n        <div>\r\n          number: \r\n          <input \r\n            value={newNumber} \r\n            onChange={handleNumberChange}/>\r\n        </div>\r\n        <div>\r\n          <button className=\"add\" type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\n  export default PersonForm","import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n\r\n    const { newSearch, handleSearchChange } = props\r\n\r\n    return (\r\n        <div>\r\n        Search:\r\n        <input \r\n          value={newSearch}\r\n          onChange={handleSearchChange}/>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Persons = (props) => {\r\n\r\n    const { personsToShow, deletePerson } = props\r\n\r\n    return (\r\n        <ul>\r\n        {personsToShow.map(person =>\r\n          <li key={person.id}>{person.name} {person.number}\r\n            <button onClick={() => deletePerson(person)} className=\"delete\">x</button>\r\n          </li>\r\n          )}\r\n      </ul>\r\n    )\r\n}\r\n\r\nexport default Persons","const Notification = ({ message, isError }) => {\r\n\r\n    if(isError === true){\r\n        const style = {\r\n            color: 'red',\r\n            background: 'lightgrey',\r\n            fontSize: 16,\r\n            borderStyle: 'solid',\r\n            borderRadius: 5,\r\n            padding: 10,\r\n            marginBottom: 10\r\n        }\r\n        return (\r\n            <div style={style}>\r\n              {message}\r\n            </div>\r\n          )\r\n    } else if(isError === false){\r\n        const style = {\r\n            color: 'green',\r\n            background: 'lightgrey',\r\n            fontSize: 16,\r\n            borderStyle: 'solid',\r\n            borderRadius: 5,\r\n            padding: 10,\r\n            marginBottom: 10\r\n        }\r\n        return (\r\n            <div style={style}>\r\n              {message}\r\n            </div>\r\n          )\r\n    } else {\r\n        return null\r\n    }\r\n    \r\n  \r\n    \r\n  }\r\n\r\n  export default Notification","import React, { useEffect, useState } from 'react'\r\nimport PersonForm from './components/PersonForm'\r\nimport Filter from './components/Filter'\r\nimport Persons from './components/Persons'\r\nimport restService from './services/restMethods'\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ newSearch, setNewSearch ] = useState('')\r\n  const [ eventMessage, setEventMessage ] = useState()\r\n  const [ isError, setIsError ] = useState()\r\n\r\n//useEffectillä haetaan data db.jsonin 3001 portissa\r\n// olevalta sivulta localhost:3001/persons, haut tapahtuu nyt restMethodsissa service hakemistossa\r\nuseEffect(() => {\r\n  console.log('effect');\r\n  restService\r\n    .getAll()\r\n    .then(initialPersons => {\r\n      console.log('promise fulfilled');\r\n      setPersons(initialPersons)\r\n    })\r\n}, [])\r\n\r\nconsole.log('render', persons.length, 'notes')\r\n\r\n// Handle input changes\r\n  const handleNameChange = (e) => {\r\n    setNewName(e.target.value)\r\n    //näyttää inputin muutokset konsolissa\r\n    //console.log(e.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (e) => {\r\n    setNewNumber(e.target.value)\r\n  }\r\n\r\n  const handleSearchChange = (e) => {\r\n    setNewSearch(e.target.value)\r\n  }\r\n\r\n  const deletePerson = deletedPerson => {\r\n    const warning = window.confirm(`Do you want to delete ${deletedPerson.name}?`)\r\n    if (warning) {\r\n      restService\r\n        .remove(deletedPerson.id)\r\n        .then(() => {\r\n          setPersons(persons.filter(person => person.id !== deletedPerson.id))\r\n          console.log('delete succesfull', deletedPerson.name);\r\n          setIsError(false)\r\n          setEventMessage(`Deleted ${deletedPerson.name}`)\r\n          setTimeout(() => {\r\n            setEventMessage(null)\r\n            setIsError()\r\n          }, 3000)\r\n        })\r\n        .catch(error => {\r\n          setEventMessage(`Deleting ${deletedPerson.name} caused an error, person was already deleted from server`)\r\n          setIsError(true)\r\n          setTimeout(() => {\r\n            setEventMessage(null)\r\n            setIsError()\r\n          }, 5000)\r\n        })\r\n    }\r\n  }\r\n\r\n// etsitaan listasta ne nimet jotka sisaltaa \r\n// newSearchin jossain kohdassa, pieniksi kirjaimiksi muutettuna\r\n  const personsToShow = newSearch === ('')\r\n    ? persons\r\n    : persons.filter(person => person.name.toLocaleLowerCase()\r\n    .includes(newSearch.toLocaleLowerCase()))\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification \r\n        message={eventMessage}\r\n        isError={isError}/>\r\n      <Filter \r\n        newSearch={newSearch}\r\n        handleSearchChange={handleSearchChange}\r\n        />\r\n      <h3>Add new</h3>\r\n      <PersonForm \r\n        persons={persons}\r\n        setPersons={setPersons}\r\n        newName={newName}\r\n        setNewName={setNewName}\r\n        newNumber={newNumber}\r\n        setNewNumber={setNewNumber}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n        setEventMessage={setEventMessage}\r\n        setIsError={setIsError}\r\n        />\r\n      <h3>Numbers</h3>\r\n      <Persons \r\n        personsToShow={personsToShow}\r\n        persons={persons}\r\n        setPersons={setPersons}\r\n        deletePerson={deletePerson}\r\n      />\r\n      \r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <App />, \r\n  document.getElementById('root')\r\n)"],"sourceRoot":""}